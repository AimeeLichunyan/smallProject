<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>闭包练习</title>
</head>
<body>
    <script>
        class Product {
            constructor(name) {
                this.name = name;
            }
            init() {
                alert('init')
            }
            fun1() {
                alert('fun1')
            }
            fun2() {
                alert('fun2')
            }
        }
        // 工厂
        class Creator {
            create(name) {
                return new Product(name)
            }
        }
        // 创建一个工厂的实例
        var creator = new Creator();
        var p = creator.create('p1');
        p.init()
        p.fun1()

        class jQuery {
            constructor(selector) {

            }
            append() {

            }
            addClass() {

            }
            html(data) {

            }
        }
        window.$ = function(selector) { // 最外层的函数是一个工厂，相当于这个工厂封装了返回实例的操作
            return new jQuery(selector)
        }

        // 单例模式
        // class singleObject {
        //     login() {
        //         console.log('login...')
        //     }
        // }
        // singleObject.getInstance = (function() {
        //     let instance;
        //     return function() {
        //         if(!instance) {
        //             instance = new singleObject();
        //         }
        //         return instance;
        //     }
        // })()
        // let obj1 = singleObject.getInstance();
        // obj1.login();
        // let obj2 = singleObject.getInstance();
        // obj2.login();
        // console.log('obj1===obj2',obj1===obj2) // true
        // console.log('obj1===obj3',obj1===obj3) // false

        // if(window.jQuery !== null) {
        //     return window.jQuery
        // }else {
        //     初始化
        // }
            class LoginForm {
                constructor() {
                    this.state = 'hide'
                }
                show() {
                    if(this.state === 'show') {
                        alert('已经显示');
                        return 
                    }
                    this.state = 'show';
                    console.log("登录框显示成功");
                    
                }
                hide() {
                    if(this.state === 'hide') {
                        alert('已经隐藏');
                        return 
                    }
                    this.state = 'show';
                    console.log("登录框隐藏");
                }
            }
            LoginForm.getInstance = (function() {
                let instance;
                return function() {
                    if(!instance) {
                        instance = new LoginForm();
                    }
                    return instance;
                }
            })()

            let login1 = LoginForm.getInstance();
            login1.show();
            let login2 = LoginForm.getInstance();
            login2.show()
            console.log('login1===login2',login1===login2) // true
    </script>
</body>
</html>